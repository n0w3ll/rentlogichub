## Menu
- **Dashboard**
- **Property**

   - List of all houses/parking which can contain:

      - Owner

      - Address

      - House/Parking number

      - Feature

      - Rent

      - Status (Vacant/Occupied)

      - Picture of house (can upload picture and save to cloud if possible)

      - Agent Name

   - Option to Add/Edit/Delete

   - Clicking the house could provide view of all the tenant (current/Previous) (sub window
using bootstrap is possible)

- **Tenant**
   - List of all the Tenant (current/previous)

      - Full Name

      - Identity/Passport Number

      - Phone Number

      - Email

      - Registration Date

      - Agreement Document

      - Status (Renting/Free)


   - Clicking on the tenant would open up tenant details

   - Option to Add/Edit/Delete(Only Admin)

- **Rent**
   
   - Tenant ID

   - Property ID

   - IN DATE

   - OUT DATE

   - Deposit

- **Owner**
   - Same details as Tenant

- **Agent**
   
   - List of all agent

      - Full Name

      - Company Name

      - Phone Number

      - Email

- **Vendors**
   - List of all vendors
  
      - Company Name

      - Contact Person

      - Phone number

      - Email

- **Invoices**

   - List of all invoices issue, including bill

      - Issue To (Tenant/Owner)

      - Date issued

      - Details of invoice

      - Date Due

      - Ability to Upload Invoices

      - Amount

      - Status (Open/Ovedue/Paid)

   - Option to Add/Edit/Delete

   - Cron job for schedule invoices - rent

- **Transaction**

   - List of all transaction

      - Date

      - Type of transaction (Rent/Utility/Maintainence)

      - Vendor

      - House/Parking related to transaction

      - Amount

## Add On

- Reminder send thru email for overdue invoices

- Upload documents to cloud based e.g. dropbox, gdrive, onedrive

- Ability to assigned Admin

- Each owner can only view their unit but there manager that can view all unit. So Role would be

   - Admin (system admin)

   - Manager (Manage the company-can view all)

   - Owner

   - Tenant

- Can put company profile i.e. for the main page

- Ability to put system on maintenance.

## DB Relationships

- Property belongsTo Tenant

- Property belongsTo Owner

- Property belongsTo Agent (nullable)

- Rent belongsTo Tenant

- Tenant hasMany Rents

- Owner hasMany Properties

- Agent hasMany Properties (nullable)

## DB Seeders / Factories

- Super Admin seeder :

    Username : sadmin

    Email : admin@sadmin.com
    
    Password : qpAL1029#

- OwnerFactory

- PropertyFactory

- TenantFactory

## Events & Listeners

- **RentCreated** (Event)
   - update property status to 'occupied' (Listener : UpdatePropertyStatus)
   - update tenant status to 'renting' (Listener : UpdateTenantStatus)

- **CreateInvoiceListener** (Listener for RentCreated event)
   - Will auto generate invoice according to newly created rent
   - Invoice number (8 chars) will be generated by uniqueId with prefix 'INV-'

- **MarkInvoiceAsFullyPaid** (Listener for TransactionPaid event)
   - Will check if invoice is fully paid (by sum of transaction amount) and update invoice status of 'fully_paid' to TRUE

- **Laravel Eloquent model's event system** inside Models
   - Invoice model
      **static::updating()**
      - check if invoice 'fully_paid' value was changed during updates and change corresponding rent value of 'status'=>'ongoing' and 'paid'=>true

   - Rent model
      **static::updating()**
      - check if rent 'status' value was changed during updates and change corresponding status of 'property'=>'occupied' and 'tenant'=>'renting'.

## Scheduled Task

- Daily task check 'rents' table 'rent_end' value for any 'rent_end' < now() :
   - update corresponding property status to 'vacant' 
   - update corresponding tenant status to 'free'
   - Command : **update:property-status**
   - App\Console\Commands\UpdatePropertyStatus WILL only check 'RENT_END' from 'rents' table either manually or scheduled and will change $property->status to 'vacant' and $tenant->status to 'free' if 'RENT_END' < now()
   - It will also check if 'RENT_END' >= now() and change $property->status to 'occupied' and $tenant->status to 'renting' 
   - Update app\Console\Kernel accordingly for schedule timing
